h1. Documentation

h2. Deployed application

p. "http://cold-frost-3484.herokuapp.com/":http://cold-frost-3484.herokuapp.com/

h2. Webservices:

p. All webservice return JSON Object

h3. User

h4. Authentificate user

p. This webservice request facebook with the accesstoken given by the client and retrieve information. It check in the database if the user exists and retrieves information (FBid, name, firstName, lastname). If the user doesn't exist, it automatically creates him.

* Success: If the access_token is correct, it return to the client FBid,name,firstName,lastname
* Error: If the access_token is not correct

p. @GET user/{access_token}@ _(GET http://cold-frost-3484.herokuapp.com/user/{access_token})_


p. Return
* Success

bc. {
"FBid":1125222192,
"name":"Thibault Durand",
"firstName":"Thibault",
"lastName":"Durand"
"email":"tibo.durand@gmail.com"
}

* Error

bc. {
    "error":{
            "message":"Invalid OAuth access token.",
            "type":"OAuthException"
            }
    }
    
    
h4. List accounts of the user

p. This web service retrieve the list of account the user is part of

p. @GET /user/account/all/{access_token}@

p. Return the list of account : in this example, there is just one account call "NewAccount"

bc. [
{
"account":{
"currency":"euros",
"entityId":3,
"id":3,
"name":"NewAccount",
"persistent":true
},
"entityId":4,
"id":4,
"persistent":true,
"role":"ADMIN",
"status":"CONFIRMED",
"user":{
"FBid":1125222192,
"email":null,
"entityId":1,
"firstName":"Thibault",
"id":1,
"lastName":"Durand",
"name":"Thibault Durand",
"persistent":true
}
}
]
    
h3. Account

h4. Create Account

p. This web service create an Account and send invite to participants

p. @POST account/@ 

p. Arguments :

* *access_token* : Your facebook access_token
* *name* : the name of the account
* *currency* : the currency of the account (exemple: "euro")
* *emails* : the list of emails of the participants you want to invite

p. Return the account just created

For example: creation of an account "NewAccount" with 2 participants : test@gmail.com and truc@gmail.com

(_Arguments: access_token=AAAEFcJcBFwEBAPHM8Rz1x2L3sVaZAqrEBTPHIkMFr5&name=NewAccount&currency=euros&emails=test@gmail.com&emails=truc@gmail.com_)

bc. 
    {
    "creator":{
    "entityId":4,
    "id":4,
    "persistent":true,
    "role":"ADMIN",
    "status":"CONFIRMED",
    "user":{
    "FBid":1125222192,
    "email":null,
    "entityId":1,
    "firstName":"Thibault",
    "id":1,
    "lastName":"Durand",
    "name":"Thibault Durand",
    "persistent":true
    }
    },
    "currency":"euros",
    "entityId":3,
    "id":3,
    "listParticipants":[
    {
    "entityId":4,
    "id":4,
    "persistent":true,
    "role":"ADMIN",
    "status":"CONFIRMED",
    "user":{
    "FBid":1125222192,
    "email":null,
    "entityId":1,
    "firstName":"Thibault",
    "id":1,
    "lastName":"Durand",
    "name":"Thibault Durand",
    "persistent":true
    }
    },
    {
    "entityId":6,
    "id":6,
    "persistent":true,
    "role":"USER",
    "status":"PENDING",
    "user":{
    "FBid":0,
    "email":"test@gmail.com",
    "entityId":5,
    "firstName":null,
    "id":5,
    "lastName":null,
    "name":null,
    "persistent":true
    }
    },
    {
    "entityId":8,
    "id":8,
    "persistent":true,
    "role":"USER",
    "status":"PENDING",
    "user":{
    "FBid":0,
    "email":"truc@gmail.com",
    "entityId":7,
    "firstName":null,
    "id":7,
    "lastName":null,
    "name":null,
    "persistent":true
    }
    }
    ],
    "name":"NewAccount",
    "persistent":true
    }

